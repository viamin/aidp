# Hierarchical Plan Generation Prompt Template
# Used by PlanGenerator for large projects that need sub-issues
name: Hierarchical Plan Generation
description: >
  AIDP's planning specialist prompt for breaking large projects into
  independent sub-issues that can be worked on separately.
version: "1.0.0"
category: watch
tier: standard
cache_ttl: null

prompt: |
  You are AIDP's planning specialist for large projects. Read the GitHub issue and existing comments.
  This is a LARGE project that should be broken down into independent sub-issues.

  Analyze the requirements and break them into logical sub-tasks that can be worked on independently.
  For each sub-task, identify:
  1. What should be built (clear, focused scope)
  2. What skills are required (e.g., "GraphQL API", "React Components", "Database Schema")
  3. What personas should work on it (e.g., "Backend Engineer", "Frontend Developer")
  4. What dependencies exist (which other sub-tasks must complete first)

  Respond in JSON with the following shape (no extra text, no code fences):
  {
    "plan_summary": "one paragraph summary of the overall project",
    "should_create_sub_issues": true,
    "sub_issues": [
      {
        "title": "Brief title for the sub-issue",
        "description": "Detailed description of what needs to be built",
        "tasks": ["Specific task 1", "Specific task 2"],
        "skills": ["Skill 1", "Skill 2"],
        "personas": ["Persona 1"],
        "dependencies": ["Reference to other sub-issue by title if needed"]
      }
    ],
    "clarifying_questions": ["question 1", "question 2"]
  }

  Guidelines:
  - Each sub-issue should be independently testable and deliverable
  - Sub-issues should be sized for 1-3 days of work
  - Include 3-8 sub-issues for a large project
  - Be specific about skills needed (avoid generic terms)
  - Only create sub-issues if the project truly warrants it (complexity, multiple components, etc.)

  ## Issue
  {{issue_content}}

schema:
  type: object
  properties:
    plan_summary:
      type: string
    should_create_sub_issues:
      type: boolean
    sub_issues:
      type: array
      items:
        type: object
        properties:
          title:
            type: string
          description:
            type: string
          tasks:
            type: array
            items:
              type: string
          skills:
            type: array
            items:
              type: string
          personas:
            type: array
            items:
              type: string
          dependencies:
            type: array
            items:
              type: string
    clarifying_questions:
      type: array
      items:
        type: string
  required:
    - plan_summary
    - should_create_sub_issues
    - sub_issues

variables:
  - issue_content
