# Error Classification Prompt Template
# Used by AIDecisionEngine to classify errors and determine retry strategy
name: Error Classification
description: >
  Classifies errors and determines if they are retryable, along with
  recommended actions for error recovery.
version: "1.0.0"
category: decision_engine
tier: mini
cache_ttl: null

prompt: |
  Classify the following error and determine if it's retryable.

  Error:
  {{error_message}}

  Context:
  {{context}}

  Determine:
  1. Error type (rate_limit, auth, timeout, network, api_bug, other)
  2. Whether it's retryable (transient vs permanent)
  3. Recommended action (retry, switch_provider, escalate, fail)

  Provide classification with confidence and reasoning.

schema:
  type: object
  properties:
    error_type:
      type: string
      enum:
        - rate_limit
        - auth
        - timeout
        - network
        - api_bug
        - other
    retryable:
      type: boolean
    recommended_action:
      type: string
      enum:
        - retry
        - switch_provider
        - escalate
        - fail
    confidence:
      type: number
      minimum: 0.0
      maximum: 1.0
    reasoning:
      type: string
  required:
    - error_type
    - retryable
    - recommended_action
    - confidence

variables:
  - error_message
  - context
