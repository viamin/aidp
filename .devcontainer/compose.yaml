name: "aidp-devcontainer"

services:
  aidp:
    build:
      context: ..
      dockerfile: .devcontainer/Dockerfile
      args:
        # Update the RUBY_VERSION arg to match the Ruby version in .tool-versions
        RUBY_VERSION: 3.4.7
        DELTA_VERSION: 0.18.2

    volumes:
    - ../../aidp:/workspaces/aidp:cached

    # Keep container running; init process handled via devcontainer tooling
    command: sleep infinity
    init: true
    depends_on:
    - qdrant

    # Use "forwardPorts" in **devcontainer.json** to forward an app port locally.
    # (Adding the "ports" property to this file will not forward from a Codespace.)
  #   depends_on:
  #   - selenium

  # selenium:
  #   image: selenium/standalone-chromium
  #   restart: unless-stopped

  qdrant:
    image: qdrant/qdrant:latest
    restart: unless-stopped
    volumes:
    - qdrant-data:/qdrant/storage
    ports:
    - "6333:6333"
    - "6334:6334"

volumes:
  qdrant-data:
  
